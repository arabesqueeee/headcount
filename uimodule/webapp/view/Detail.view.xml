<mvc:View displayBlock="true" controllerName="com.tsmc.headcount.controller.Detail" height="100%"
		xmlns="sap.uxap"
		xmlns:mvc="sap.ui.core.mvc"
		xmlns:m="sap.m"
		xmlns:f="sap.f"
        xmlns:ui="sap.ui.table"
		xmlns:form="sap.ui.layout.form">
    <ObjectPageLayout id="ObjectPageLayout"
					 showTitleInHeaderContent="true"
					alwaysShowContentHeader="false"
					preserveHeaderStateOnScroll="false"
					headerContentPinnable="true"
					isChildPage="true"
					upperCaseAnchorBar="false">
        <headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <navigationActions>
                    <m:OverflowToolbarButton type="Transparent" icon="sap-icon://full-screen" press="handleFullScreen" tooltip="Enter Full Screen Mode" visible="{= ${/actionButtonsInfo/midColumn/fullScreen} !== null }"/>
                    <m:OverflowToolbarButton type="Transparent" icon="sap-icon://exit-full-screen" press="handleExitFullScreen" tooltip="Exit Full Screen Mode" visible="{= ${/actionButtonsInfo/midColumn/exitFullScreen} !== null }"/>
                    <m:OverflowToolbarButton type="Transparent" icon="sap-icon://decline" press="handleClose"  tooltip="Close column" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
                </navigationActions>
            </ObjectPageDynamicHeaderTitle>
        </headerTitle>
        <headerContent>
            <m:FlexBox wrap="Wrap" fitContainer="true" alignItems="Stretch">
                <m:VBox justifyContent="Center" class="sapUiSmallMarginEnd">
                    <m:Label text="期間："/>
                    <m:Text text="{header>/period}"/>
                </m:VBox>
                <m:VBox justifyContent="Center" class="sapUiSmallMarginEnd">
                    <m:Label text="組織單位："/>
                    <m:Text text="{header>/org}{header>/orgName}"/>
                </m:VBox>
            </m:FlexBox>
        </headerContent>
        <sections>
            <ObjectPageSection title="員額調整記錄">
                <subSections>
                    <ObjectPageSubSection>
                        <blocks>
                            <ui:Table
                	                rows="{detail>/OrgCollection}"
                                    visibleRowCount="{= ${detail>/OrgCollection}.length}"
				                    selectionMode="Single" 
                                    id="adjustlog"
				                    ariaLabelledBy="title">
                                <ui:extension>
                                    <m:OverflowToolbar>
                                        <m:ToolbarSpacer/>
                                        <m:Button  icon="sap-icon://add" press="onNew" type="Transparent" id="onNew" text="新增"/>
                                    </m:OverflowToolbar>
                                </ui:extension>
                                <ui:Column width='8em'>
                                    <m:Label text="開始時間" />
                                    <ui:template>
                                        <m:DatePicker	value="{detail>effectiveDte}"  	valueFormat="yyyy-MM-dd"
                                        displayFormat="yyyy-MM-dd"
                                         editable="{= ${detail>type} === '' ? true : false}"/>
                                    </ui:template>
                                </ui:Column>
                                <ui:Column width='5em'  >
                                    <m:Label text="IDL調整" />
                                    <ui:template>
                                        <m:Input value="{detail>idlAdjust}" type="Number"    editable="{= ${detail>type} === '' ? true : false}"/>
                                    </ui:template>
                                </ui:Column>
                                <ui:Column width='7em' >
                                    <m:Label text="IDL調整原因" />
                                    <ui:template>
                                        <m:Input value="{detail>idlJustification}"   editable="{= ${detail>type} === '' ? true : false}"/>
                                    </ui:template>
                                </ui:Column>
                                <ui:Column width='6em'  >
                                    <m:Label text="DL調整" />
                                    <ui:template>
                                        <m:Input value="{detail>dlAdjust}"   type="Number"  editable="{= ${detail>type} === '' ? true : false}"/>
                                    </ui:template>
                                </ui:Column>
                                <ui:Column width='7em' >
                                    <m:Label text="DL調整原因" />
                                    <ui:template>
                                        <m:Input value="{detail>dlJustification}"   editable="{= ${detail>type} === '' ? true : false}"/>
                                    </ui:template>
                                </ui:Column>
                                <ui:Column width='7em' >
                                    <m:Label text="DL Allowance"  />
                                    <ui:template>
                                        <m:Input value="{detail>dlAllowance}"   type="Number"  editable="{= ${detail>type} === '' ? true : false}"/>
                                    </ui:template>
                                </ui:Column>
                                <ui:Column width='7em'>
                                    <m:Label text="IDL Allowance" />
                                    <ui:template>
                                        <m:Input value="{detail>idlAllowance}"   editable="{= ${detail>type} === '' ? true : false}"/>
                                    </ui:template>
                                </ui:Column>
                                <ui:Column width='7em'>
                                    <m:Label text="DL调整結果" />
                                    <ui:template>
                                        <m:Text text="{detail>finalDL}"/>
                                    </ui:template>
                                </ui:Column>
                                <ui:Column width='7em'>
                                    <m:Label text="IDL调整結果" />
                                    <ui:template>
                                        <m:Text text="{detail>finalIDL}"  />
                                    </ui:template>
                                </ui:Column>
                                <ui:Column width="2em">
                                    <ui:template>
                                        <m:HBox>
                                            <m:Button icon="sap-icon://save" type="Transparent" press="onSaveNewItem"    visible="{= ${detail>type} === '' ? true : false}" />
                                        </m:HBox>
                                    </ui:template>
                                </ui:Column>
                            </ui:Table>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
        </sections>
    </ObjectPageLayout>
</mvc:View>